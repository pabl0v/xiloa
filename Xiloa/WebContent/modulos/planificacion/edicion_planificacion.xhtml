<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">  
    <h:head>
        <link type="text/css" rel="stylesheet" href="../../resources/css/edicion_planificacion.css"></link>
    </h:head>
    <h:body>
    <div id="contenedor">      
      	<div id="header">
            <ui:insert name="header" >
	             <ui:include src="../../modulos/compartido/paginamaestra.xhtml" />
		    </ui:insert>
		    <script type="text/javascript" src="../../resources/scripts/edicion_planificacion.js"></script>
		</div>
        <h2>Unidad de Competencia:  <h:outputText value="#{certificacionManagedBean.nombreCertificacion}" /> </h2>
        <div id="contenedor_secciones">                   
            <div class="seccion_edicion">
                <h3>Planificacion</h3>
                <div class="seccion_interna">
                    <h:form>
                   		<p:growl id="growl" showDetail="true"/>
                   		
                        <div class="contenedor_calendario">
                            <p>Inicia la divulgacion:</p>
                            <span class="proteccion_calendario">
                            <p:calendar value="#{certificacionManagedBean.fechaIniciaDivulgacion}" id="popupButtonCal1" showOn="button" pattern="dd/MM/yyyy">
                            	<p:ajax event="dateSelect" update="growl" />  
                            </p:calendar></span>  
                        </div>   
                        
                        <div class="contenedor_calendario">
                            <p>Finaliza la inscripcion:</p>
                            <span class="proteccion_calendario">
                            <p:calendar value="#{certificacionManagedBean.fechaFinalizaInscripcion}" id="popupButtonCal2" showOn="button">
                           		<p:ajax event="dateSelect" update="growl" /> 
                            </p:calendar></span>  
                        </div>
                        <div class="contenedor_calendario">
                            <p>Inicia convocatoria:</p>
                            <span class="proteccion_calendario">
                            <p:calendar value="#{certificacionManagedBean.fechaIniciaConvocatoria}" id="popupButtonCal3" showOn="button">
                            	<p:ajax event="dateSelect" update="growl" /> 
                            </p:calendar></span>  
                        </div>
                        <div class="contenedor_calendario">
                            <p>Inicia evaluaciones:</p>
                            <span class="proteccion_calendario">
                            <p:calendar value="#{certificacionManagedBean.fechaIniciaEvaluacion}" id="popupButtonCal4" showOn="button">
                            	<p:ajax event="dateSelect" update="growl" /> 
                            </p:calendar></span>  
                        </div>
                    </h:form>
                </div>
            </div>          
            <div class="seccion_edicion">
                <h3>Involucrados</h3>
                <h:form styleClass="formulario_inline">
                    <p:commandButton value="Agregar involucrados" onclick="PF('dlg2').show();"/> 
                </h:form>    
                <h:form id="form">
                   <div class="seccion_interna">
                   <p:dataTable id="display" emptyMessage="No hay datos para mostrar"  var="contacto" value="#{certificacionManagedBean.selectedContactos}">  
                        <p:column headerText="Nombre"><h:outputText value="#{contacto.nombreCompleto}" /></p:column>  
                        <p:column headerText="Funcion"><h:outputText value="#{contacto.rol.descripcion}" /></p:column>  
                        <p:column headerText="Correo electronico"><h:outputText value="#{contacto.correo1}" /></p:column>  
                    </p:dataTable> 
                    </div>
                </h:form>
            </div>

            <div class="seccion_edicion" style="height: 260px">
                <h3>Descripcion de la unidad</h3>
                <h:form>
                     <div>
                         <!--<p:editor id="editor2" value="#{editorBean.value}" height="190"/>-->
                         <p:editor id="editor2" value="#{certificacionManagedBean.descripcionCertificacion}" height="190"/>   
                     </div>    
                     <p>Estatus</p>
                     <p:selectOneMenu id="selector_estatus" styleClass="selector_status_estilo" value="#{pprBean.city}">  
                        <f:selectItem itemLabel="Planificado" itemValue="" />
                        <f:selectItems value="#{pprBean.cities}" />  
                    </p:selectOneMenu>  
                </h:form>
            </div>
            
            <div class="seccion_edicion" style="height: 260px">
                 <h:form>
                    <p>Nombre del centro evaluador</p>
                    <!-- <h:outputText value="#{certificacionManagedBean.nombreCentro}" />-->
                    <p:inputText id="txt" styleClass="selector_nombrecentro_estilo" value="#{certificacionManagedBean.nombreCentro}" /> 
					<!--  <p:poll interval="3" listener="#{planificacionManagedBean.selectedCompetencia.nombreCentro}" update="txt" />--> 
                    <p style="display:block"><br/>Direccion del centro evaluador</p>
                    <p:inputTextarea rows="105" cols="68" value="#{certificacionManagedBean.direccionCentro}" completeMethod="#{certificacionManagedBean.direccionCentro}" queryDelay="750" minQueryLength="4" />  
                    <p style="margin-right:5px;"><br/>Costo de aranceles para el candidato:</p>
                    <p:inputText value="#{certificacionManagedBean.costo}" />  
                </h:form>   
            </div>
            <div class="seccion_edicion" style="height: 1px"></div>
            <div class="seccion_edicion" style="height: 1px">    
	            <div class="contenedor_botones">
		               <h:form>
		                    <p:commandButton value="Cancelar"/> 
		                    <p:commandButton value="Aceptar" action="#{certificacionManagedBean.guardar}"/> 
		               </h:form>
	            </div>
            </div>
                  
            <div id="tab_contenedor">
                <p:tabView id="tabView">  
                    <p:tab id="tab1" title="Actividades">  
                        <h:form>     
                        <p:commandButton value="Agregar" style="margin-bottom: 5px" onclick="PF('dlg1').show();"/>    
                           	<p:dataTable emptyMessage="No hay datos para mostrar" var="actividad" value="#{certificacionManagedBean.actividades}" widgetVar="carsTable" filteredValue="#{tableBean.filteredCars}" paginator="true" rows="10" rowKey="#{actividad.id}" selectionMode="single">  
							    <f:facet name="header">  
							         <p:outputPanel style="text-align:right;">  
							             <h:outputText value="Buscar:" />  
							             <p:inputText id="globalFilter" onkeyup="carsTable.filter()" style="margin-left: 4px; width:150px" />  
							         </p:outputPanel>  
							    </f:facet>   
							    <!-- Este ajax permite mostrar el modal al hacer click en las filas de la tabla -->            
	               				<p:ajax event="rowSelect" oncomplete="window.location='/Xiloa/modulos/planificacion/edicion_actividad.xhtml'" />          
                                <p:column headerText="Nombre de la actividad"><h:outputText value="#{actividad.nombreActividad}" /></p:column>  
                                <p:column headerText="Tipo"><h:outputText rvalue="#{competencia.nombreUCompetencia}" /></p:column>  
                                <p:column headerText="Lugar/Medio"><h:outputText value="#{competencia.nombreUCompetencia}" /></p:column>  
                                <p:column headerText="Fecha"><h:outputText value="#{competencia.nombreUCompetencia}" /></p:column>  
                                <p:column headerText="Responsable"><h:outputText value="#{competencia.nombreUCompetencia}" /></p:column>  
                                <p:column headerText="Estado"><h:outputText value="#{competencia.nombreUCompetencia}" /></p:column>  
                            </p:dataTable> 
                        </h:form>       
                    </p:tab>  

                    <p:tab id="tab2" title="Divulgacion">  
                         <h:form>     
                        <p:commandButton value="Agregar" style="margin-bottom: 5px" onclick="PF('dlg1').show();"/>    
                            <p:dataTable var="competencia" value="#{planificacionManagedBean.competencias}" widgetVar="carsTable" emptyMessage="No se han encontrado datos." filteredValue="#{tableBean.filteredCars}" paginator="true" rows="10" rowKey="#{competencia.nombreUCompetencia}" selectionMode="single">  
							    <f:facet name="header">  
							         <p:outputPanel style="text-align:right;">  
							             <h:outputText value="Buscar:" />  
							             <p:inputText id="globalFilter" onkeyup="carsTable.filter()" style="margin-left: 4px; width:150px" />  
							         </p:outputPanel>  
							    </f:facet>   
							    <!-- Este ajax permite mostrar el modal al hacer click en las filas de la tabla -->            
	               				<p:ajax event="rowSelect" oncomplete="window.location='/Xiloa/modulos/planificacion/edicion_actividad.xhtml'" />          
                                <p:column headerText="Nombre de la actividad"><h:outputText value="#{competencia.nombreUCompetencia}" /></p:column>  
                                <p:column headerText="Tipo"><h:outputText rvalue="#{competencia.nombreUCompetencia}" /></p:column>  
                                <p:column headerText="Lugar/Medio"><h:outputText value="#{competencia.nombreUCompetencia}" /></p:column>  
                                <p:column headerText="Fecha"><h:outputText value="#{competencia.nombreUCompetencia}" /></p:column>  
                                <p:column headerText="Responsable"><h:outputText value="#{competencia.nombreUCompetencia}" /></p:column>  
                                <p:column headerText="Estado"><h:outputText value="#{competencia.nombreUCompetencia}" /></p:column>  
                            </p:dataTable> 
                        </h:form>      
                    </p:tab>  

                    <p:tab id="tab3" title="Verificacion">  
                       <h:form>     
                        <p:commandButton value="Agregar" style="margin-bottom: 5px" onclick="PF('dlg1').show();"/>    
                            <p:dataTable var="competencia" value="#{planificacionManagedBean.competencias}" widgetVar="carsTable" emptyMessage="No se han encontrado datos." filteredValue="#{tableBean.filteredCars}" paginator="true" rows="10" rowKey="#{competencia.nombreUCompetencia}" selectionMode="single">  
							    <f:facet name="header">  
							         <p:outputPanel style="text-align:right;">  
							             <h:outputText value="Buscar:" />  
							             <p:inputText id="globalFilter" onkeyup="carsTable.filter()" style="margin-left: 4px; width:150px" />  
							         </p:outputPanel>  
							    </f:facet>   
							    <!-- Este ajax permite mostrar el modal al hacer click en las filas de la tabla -->            
	               				<p:ajax event="rowSelect" oncomplete="window.location='/Xiloa/modulos/planificacion/edicion_actividad.xhtml'" />          
                                <p:column headerText="Nombre de la actividad"><h:outputText value="#{competencia.nombreUCompetencia}" /></p:column>  
                                <p:column headerText="Tipo"><h:outputText rvalue="#{competencia.nombreUCompetencia}" /></p:column>  
                                <p:column headerText="Lugar/Medio"><h:outputText value="#{competencia.nombreUCompetencia}" /></p:column>  
                                <p:column headerText="Fecha"><h:outputText value="#{competencia.nombreUCompetencia}" /></p:column>  
                                <p:column headerText="Responsable"><h:outputText value="#{competencia.nombreUCompetencia}" /></p:column>  
                                <p:column headerText="Estado"><h:outputText value="#{competencia.nombreUCompetencia}" /></p:column>  
                            </p:dataTable> 
                        </h:form>       
                    </p:tab>  
                    
                    <p:tab id="tab4" title="UC a evaluar">  
                        <h:form>     
                        <p:commandButton value="Agregar" style="margin-bottom: 5px" onclick="PF('dlg1').show();"/>    
                            <p:dataTable var="competencia" value="#{planificacionManagedBean.competencias}" widgetVar="carsTable" emptyMessage="No se han encontrado datos." filteredValue="#{tableBean.filteredCars}" paginator="true" rows="10" rowKey="#{competencia.nombreUCompetencia}" selectionMode="single">  
							    <f:facet name="header">  
							         <p:outputPanel style="text-align:right;">  
							             <h:outputText value="Buscar:" />  
							             <p:inputText id="globalFilter" onkeyup="carsTable.filter()" style="margin-left: 4px; width:150px" />  
							         </p:outputPanel>  
							    </f:facet>   
							    <!-- Este ajax permite mostrar el modal al hacer click en las filas de la tabla -->            
	               				<p:ajax event="rowSelect" oncomplete="window.location='/Xiloa/modulos/planificacion/edicion_actividad.xhtml'" />          
                                <p:column headerText="Nombre de la actividad"><h:outputText value="#{competencia.nombreUCompetencia}" /></p:column>  
                                <p:column headerText="Tipo"><h:outputText rvalue="#{competencia.nombreUCompetencia}" /></p:column>  
                                <p:column headerText="Lugar/Medio"><h:outputText value="#{competencia.nombreUCompetencia}" /></p:column>  
                                <p:column headerText="Fecha"><h:outputText value="#{competencia.nombreUCompetencia}" /></p:column>  
                                <p:column headerText="Responsable"><h:outputText value="#{competencia.nombreUCompetencia}" /></p:column>  
                                <p:column headerText="Estado"><h:outputText value="#{competencia.nombreUCompetencia}" /></p:column>  
                            </p:dataTable> 
                        </h:form>       
                    </p:tab>  
                </p:tabView>  
            </div>
        </div>
    </div>
        
     <p:dialog id="modalDialog" styleClass="estilo_dialogoactividades" header="Agregar subtarea de verificacion:" widgetVar="dlg1" modal="true" resizable="false" width="550" height="570">
     <div id="contenedor_dialogoactividades">  
         <h:form>  
             <h3>Planificacion de actividades</h3>
             <p>Nombre de la actividad</p>
             <p:inputTextarea rows="10" cols="50" completeMethod="#{autoCompleteBean.completeArea}" queryDelay="750" minQueryLength="4" />
             <div class="dialogoactividades_secciones">  
	             <p>Fecha:</p>
	             <p:calendar value="#{actividadManagedBean.fechaInicial}" id="popupButtonCal1" showOn="button" />
             </div>
             <div class="dialogoactividades_secciones">  
             <p>Estatus:</p>
	             <p:selectOneMenu id="estatus" value="#{pprBean.city}">  
	                <f:selectItem itemLabel="Select City" itemValue="" />  
	                <f:selectItems value="#{pprBean.cities}" />  
	             </p:selectOneMenu>
             </div> 
             <p>Lugar/Medio:</p>
             <p:inputTextarea rows="10" cols="50" completeMethod="#{actividadManagedBean.destino}" queryDelay="750" minQueryLength="4" />
             <div class="dialogoactividades_secciones2">   
             <p>Tipo de actividad:</p>
	             <p:selectOneMenu id="tipo" value="#{actividadManagedBean.selectedTipoActividad}">
	                <f:selectItem itemLabel="Seleccione..." itemValue="" />
	                <f:selectItems value="#{actividadManagedBean.tipoActividades}" var="actividad" itemLabel="#{actividad.valor}" itemValue="#{actividad}" />
	             </p:selectOneMenu> 
             </div>
             <p:commandButton value="Agregar involucrados"/>
             <div id="dialogoactividades_involucrados">               
	             <p:dataTable var="involucrados" value="#{tableBean.carsSmall}">  
	                    <p:column headerText="Nombre"><h:outputText value="#{car.model}" /></p:column> 
	                    <p:column headerText="Funcion"><h:outputText value="#{car.year}" /></p:column> 
	                    <p:column headerText="Correo electronico"><h:outputText value="#{car.manufacturer}" /></p:column>  
	             </p:dataTable> 
             </div>
         </h:form>  
    </div>
    <div id="dialogoactividades_botones">
	    <h:form>
	        <p:commandButton value="Cancelar" onclick="PF('dlg1').hide();"/> 
	        <p:commandButton value="Aceptar"/> 
	    </h:form>   
    </div>
    </p:dialog>     
    
     <p:dialog id="modalDialog2" styleClass="estilo_dialogoactividades" header="Agregar involucrados:" widgetVar="dlg2" modal="true" resizable="false" width="550" height="400">
     	<h:form>
     		<h3>Añada intregantes de esta lista:</h3>
     		 <p:dataTable emptyMessage="No hay datos para mostrar"  var="contacto" value="#{certificacionManagedBean.contactos}" rowKey="#{contacto.id}" selection="#{certificacionManagedBean.selectedContactos}" selectionMode="multiple">  
                        <p:column headerText="Nombre"><h:outputText value="#{contacto.nombreCompleto}" /></p:column>  
                        <p:column headerText="Funcion"><h:outputText value="#{contacto.rol.descripcion}" /></p:column>  
                        <p:column headerText="Correo electronico"><h:outputText value="#{contacto.correo1}" /></p:column>  
                    </p:dataTable> 
	        <p:commandButton value="Cancelar" onclick="PF('dlg1').hide();"/> 
	        <p:commandButton value="Aceptar" update=":form:display" oncomplete="PF('dlg1').hide();"/> 
	    </h:form>   
     </p:dialog>
</h:body>
</html>
