<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
       <link type="text/css" rel="stylesheet" href="../../resources/css/edicion_actividad.css"></link>
    </h:head>
    <h:body>
    <div id="contenedor"> 
      	<div id="header">
            <ui:insert name="header" >
                <ui:include src="../../modulos/compartido/paginamaestra.xhtml" />
	    	</ui:insert>
	    	<script type="text/javascript" src="../../resources/scripts/edicion_actividad.js"></script>
		</div>    
        <h2>Actividad: <h:outputText value="#{actividadManagedBean.actividad.nombre}" /></h2>
        <div id="contenedor_secciones">
                      
            <div class="seccion_edicion" style="height:140px;">
                <div class="seccion_interna" style="height:90px; padding: 10px; margin-top:5px;">
             		<h:form>
             		  <div style="dsplay:block;">
                        <p style="width:240px; margin-bottom:20px;">Fecha en que se ejecutara la actividad:</p>
                        <span style="width:60px"><p:calendar value="#{actividadManagedBean.actividad.fechaInicial}" id="fecha_ejecutara" showOn="button" pattern="dd/MM/yyyy"/></span>
                      </div>   
                        <p>Hora:</p>
                        <p:inputText style="margin-left:5px;"></p:inputText>  
                        <p style="margin-left:4px;">Lugar:</p>
                        <p:inputText style="margin-left:5px;" value="#{actividadManagedBean.actividad.destino}" completeMethod="#{actividadManagedBean.actividad.destino}"></p:inputText>   
            		</h:form>
                </div>          
            </div>          
            <div class="seccion_edicion">
                <h3>Involucrados</h3>
                <h:form styleClass="formulario_inline">
                    <p:commandButton value="Agregar involucrados" onclick="PF('dlg1').show();"/> 
                </h:form>    
                <h:form id="form_contactos_actividad">
                    <div class="seccion_interna" style="height:220px;">
                    <p:dataTable id="display_contactos_actividad" var="contacto" value="#{actividadManagedBean.actividad.involucrados}">  
                        <p:column headerText="Nombre"><h:outputText value="#{contacto.nombreCompleto}" /></p:column>  
                        <p:column headerText="Funcion"><h:outputText value="#{contacto.rol.descripcion}" /></p:column>  
                        <p:column headerText="Correo electronico"><h:outputText value="#{contacto.correo1}" /></p:column>
                    </p:dataTable>
                    </div>
                </h:form>                
            </div>
            <div class="seccion_edicion" style="position: relative;top: -100px;">
                <h3>Objetivo y alcanze de la actividad</h3>
                <h:form>
                     <div class="seccion_interna">
                         <p:editor id="edtor_objetivo" value="#{actividadManagedBean.actividad.alcance}" height="160"/>                  
                     </div>    
                </h:form>
            </div>     
            <div id="datos_actividad" class="seccion_edicion">
                 <h:form>
                    <p>Nombre del centro evaluador : <b><h:outputText value="#{actividadManagedBean.nombreCentro}" /></b></p>
                    <p style="display:block;margin-top:10px;">Direccion del centro evaluador: <b><h:outputText value="#{actividadManagedBean.direccionCentro}" /></b></p>  
	                <p>Registrado: <b><h:outputText value="#{actividadManagedBean.actividad.fechaRegistro}"/></b></p>
	                <br/>
	                <p>Tipo de actividad: <b><h:outputText value="#{actividadManagedBean.actividad.tipo.valor}" /></b></p>
                	<br/>                    
                	<p>Estatus:</p>
                	<p:selectOneMenu style="position:relative;top:7px;margin-left:62px;width:190px;" id="estatus" value="#{actividadManagedBean.selectedEstatusActividad}">  
	                   <f:selectItem itemLabel="Seleccione..." itemValue="" />  
	                   <f:selectItems value="#{actividadManagedBean.catalogoEstatusActividad}" var="estatus" itemLabel="#{estatus.valor}" itemValue="#{estatus.id}" />  
	                </p:selectOneMenu>  
                </h:form>
            </div>
            
            <div class="seccion_edicion" style="position: relative;top: -150px;">
                <h3>Materiales y/o documentos a utilizar</h3>
                <h:form>
                     <div class="seccion_interna">
                         <p:editor id="editor_materiales" value="#{actividadManagedBean.actividad.materiales}" height="160"/>                  
                     </div>    
                </h:form>
            </div>
            
            <div class="seccion_edicion" style="height:30px;">
               <h:form>
                    <p:commandButton value="Cancelar" action="#{actividadManagedBean.cancelar}"/> 
                    <p:commandButton value="Aceptar" action="#{actividadManagedBean.guardar(actividadManagedBean.actividad)}"/> 
               </h:form>
            </div>
        </div>
        
        <div id="tab_contenedor">
                <p:tabView id="tabView">  
                    <p:tab id="tab1" title="Bitacoras">  
                        <h:form>     
                        <p:commandButton value="Agregar" onclick="PF('dlg2').show();"/>      
                            <p:dataTable var="actividades" value="#{tableBean.carsSmall}">  
                                <p:column headerText="Asunto"><h:outputText value="#{car.model}" /></p:column>  
                                <p:column headerText="Reporta"><h:outputText value="#{car.year}" /></p:column>  
                                <p:column headerText="Resumen"><h:outputText value="#{car.manufacturer}" /></p:column>  
                                <p:column headerText="Fecha"><h:outputText value="#{car.manufacturer}" /></p:column>  
                                <p:column headerText="Estado"><h:outputText value="#{car.manufacturer}" /></p:column>  
                            </p:dataTable> 
                        </h:form>       
                    </p:tab>  
                </p:tabView>  
            </div>     
    </div>
    
     <p:dialog id="modalIntegrantes" styleClass="estilo_dialogoactividades" header="Agregar involucrados:" widgetVar="dlg1" modal="true" resizable="false" width="550" height="400">
     	<h:form>
     		<h3>Agregue intregantes:</h3>
     		 <p:dataTable emptyMessage="No hay datos para mostrar"  var="contacto" value="#{actividadManagedBean.contactos}" rowKey="#{contacto.id}" selection="#{actividadManagedBean.selectedContactos}" selectionMode="multiple">  
                        <p:column headerText="Nombre"><h:outputText value="#{contacto.nombreCompleto}" /></p:column>  
                        <p:column headerText="Funcion"><h:outputText value="#{contacto.rol.descripcion}" /></p:column>  
                        <p:column headerText="Correo electronico"><h:outputText value="#{contacto.correo1}" /></p:column>  
                    </p:dataTable> 
	        <p:commandButton value="Cancelar" onclick="PF('dlg1').hide();"/> 
	        <p:commandButton value="Aceptar" update=":form_contactos_actividad:display_contactos_actividad" oncomplete="PF('dlg1').hide();"/> 
	    </h:form>   
     </p:dialog>
        
     <p:dialog id="modalBitacora" header="Agregar bitacora" widgetVar="dlg2" modal="true" width="550" height="470">  
         <h:form>  
            <h3>Bitacora</h3>
	         <p:panelGrid columns="2">  
			 <p>Fecha de registro:</p>
			 <span class="proteccion_calendario"><p:calendar value="#{calendarBean.date3}" id="popupButtonCal1" showOn="button" /></span>   
             <p>Fecha de registro:</p>
             <span class="proteccion_calendario"><p:calendar value="#{calendarBean.date3}" id="popupButtonCal2" showOn="button" /></span>            
             <p>Persona que reporta: </p>
              <p:selectOneMenu id="tiposdf" value="#{pprBean.city}">  
                <f:selectItem itemLabel="Select City" itemValue="" />  
                <f:selectItems value="#{pprBean.cities}" />  
             </p:selectOneMenu>            
			</p:panelGrid>
             <h3>Descripcion del evento</h3>
             <p:editor id="editor" value="#{editorBean.value}" height="220"/>
             <p:commandButton value="Cancelar" onclick="PF('dlg2').hide();"/> 
             <p:commandButton value="Aceptar"/> 
         </h:form>   
    </p:dialog>     
</h:body>
</html>