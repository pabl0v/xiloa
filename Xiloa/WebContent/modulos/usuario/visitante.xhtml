<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
      
    <h:head>       
        <link type="text/css" rel="stylesheet" href="../../resources/css/reset.css"></link>
		<link type="text/css" rel="stylesheet" href="../../resources/css/visitante.css"></link>
 		<!-- Requeridos por OpenID -->
		<link type="text/css" rel="stylesheet" href="../../resources/openidselector/css/openid.css" />
		<script type="text/javascript" src="../../resources/openidselector/js/openid-jquery.js"></script>
	    <script type="text/javascript" src="../../resources/openidselector/js/openid-en.js"></script>
		<!-- ********************* -->
	    <script type="text/javascript" src="../../resources/scripts/usuario.js"></script>
        <title>SCCL</title>
    </h:head>
    <h:body>
    	<div id="contenedor">        
         <h:form id="cursos">
         	<p:growl id="growl" showDetail="true"/>
        	<header id="barra_login">       	  
            	<h1>Sistema de gestion de Certificacion de competencias laborales</h1>
            	<div class="botones_navegacion" ><p><a href="#{request.contextPath}/j_spring_security_logout">Logout</a></p></div>          
        	</header>
        	<div id="barra_buscar">
            	<p>Buscar por</p>            
	            <p:selectOneMenu id="selector_filtro" styleClass="selector_status_estilo" value="a">  
		            <f:selectItem itemLabel="Nombre de la competencia a certificar:" itemValue="a" />
		            <f:selectItem itemLabel="Centro donde esta disponible:" itemValue="a" />
		            <f:selectItem itemLabel="Otro:" itemValue="a" />  
		        </p:selectOneMenu>
	            <p:inputText id="filtro_buscar"></p:inputText>            
        	</div>
        	<div class="contenedor_central" style="width:100%;">
        		<h2>Certificaciones de Competencias Laborales disponibles</h2>
	        	<p>Seleccione en el nombre de la competencia para ver el detalle y solicitar la certificacion</p>
	        	<div id="contenedor_tabla_competencias">    
		            <p:dataTable var="competencia" value="#{planificacionManagedBean.certificaciones}" paginator="true" rows="10" 
		                paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
		                rowsPerPageTemplate="5,10,15" rowKey="#{competencia.id}" selectionMode="single" 
		                selection="#{planificacionManagedBean.selectedCertificacion}" styleClass="tablaCompetencias" >
		     			<!-- Este ajax permite mostrar el modal al hacer click en las filas de la tabla -->            
		                <p:ajax event="rowSelect" update=":cursos:panelDialogo :cursos:growl" oncomplete="PF('modal_comp').show()" />                  
		                <p:column headerText="Unidad de competencia"><h:outputText value="#{competencia.nombre}" /></p:column>  
		                <p:column headerText="Centro de Formacion"><h:outputText value="#{competencia.ifpNombre}" /></p:column>  
		                <p:column headerText="Inicia recepcion de solicitud"><h:outputText value="#{competencia.divulgacionInicia}" /></p:column>  
		            </p:dataTable> 
	            </div>
        	</div>              
	        <p:dialog id="modal_info_competencias" styleClass="modal_info_competencias" header="Detalle:" widgetVar="modal_comp" width="550" height="500">  
		        <p:outputPanel id="panelDialogo">
		        	<div class="seccion_detalle">
		      			<p>Nombre de la certificacion</p>
		      			<h:outputText value="#{planificacionManagedBean.selectedCertificacion.nombre}"></h:outputText>  		
		          	</div>
		          	<div class="seccion_detalle">
		      			<p>Ultimo dia para solicitar evaluacion:</p>
		      			<h:outputText value="#{planificacionManagedBean.selectedCertificacion.inscripcionFinaliza}"></h:outputText>  		
		          	</div>
		          	<div class="seccion_detalle">
		      			<p>Direccion del Centro evaluador:</p>
		      			<h:outputText value="#{planificacionManagedBean.selectedCertificacion.ifpDireccion}"></h:outputText>  		
		          	</div>
		          	<div class="seccion_detalle">
		      			<p>Requisitos para aplicar a la evaluacion:</p>
		      			<ul>
		      				<li>Formato de solicitud</li>
		      				<li>Copia de cedula</li>
		      				<li>2 fotos (Tama単o diploma)</li>
		      				<li>Experiencia de 3 a単os en panaderia</li>
		      				<li>Leer y escribir</li>
		      				<li>Mayor de 20 a単os de edad</li>
		      			</ul>  		
		          	</div>
		          	<div class="seccion_detalle">
		      			<p>Arancel:</p>
		      			<h:outputText value="#{planificacionManagedBean.selectedCertificacion.costo}"></h:outputText>  		
		          	</div>
			          	<p:commandButton onclick="PF('modal_comp').hide()" value="Cancelar"/>
			          	<p:commandButton id="registrarSolicitud" action="#{solicitudesManagedBean.inicializaDatos}" 
			          					 value="Aplicar" oncomplete="PF('modal_solicitud').show()" 
			          					 update=":cursos:modal_solicitud_competencia">  
        					<f:setPropertyActionListener value="#{planificacionManagedBean.selectedCertificacion.id}" 
        					                             target="#{solicitudesManagedBean.selectedIdCertificacion}" />
        					<f:setPropertyActionListener value="#{planificacionManagedBean.selectedCertificacion.ifpId}" 
        					                             target="#{solicitudesManagedBean.selectedIdIfp}" />
        				</p:commandButton>			            		            
		            </p:outputPanel>
	    	</p:dialog>        
        
	        <p:dialog id="modal_solicitud_competencia" styleClass="modal_solicitud_competencia" 
	                  header="Solicitud de registro para obtener la Certificacion: #{planificacionManagedBean.selectedCertificacion.nombre}" 
	                  widgetVar="modal_solicitud" modal="true" width="570" height="600">	          			          
	   			<div class="seccion_detalle">	   			
	                <h:outputLabel styleClass="estilo_label" for="primerNombre" value="Primer nombre:" /> 
	                <p:inputText id="primerNombre" value="#{solicitudesManagedBean.primerNombre}" />  
	                <h:outputLabel styleClass="estilo_label" for="segundoNombre" value="Segundo nombre:" />  
	                <p:inputText id="segundoNombre" value="#{solicitudesManagedBean.segundoNombre}" />  
	                <h:outputLabel styleClass="estilo_label" for="primerApellido" value="Apellido paterno:" />  
	                <p:inputText id="primerApellido" value="#{solicitudesManagedBean.primerApellido}" />  
	                <h:outputLabel styleClass="estilo_label" for="segundoApellido" value="Apellido materno:" />  
	                <p:inputText id="segundoApellido" value="#{solicitudesManagedBean.segundoApellido}" />  
	                <h:outputLabel styleClass="estilo_label" for="cedula" value="Cedula:" />  
	                <p:inputMask id="cedula" value="#{solicitudesManagedBean.numeroIdentificacion}" mask="999-999999-9999a"/>
	         	</div>           
	             <div class="seccion_detalle">
	                <h:outputLabel styleClass="estilo_label" for="empresaLabora" value="Empresa donde labora actualmente:" />  
	                <p:inputText id="empresaLabora" value="#{solicitudesManagedBean.descEmpresaLabora}" />  
	                <h:outputLabel styleClass="estilo_label" for="experiencia" value="A単os ejerciendo la actividad:" />  
	                <p:inputText id="experiencia" value="#{solicitudesManagedBean.experiencia}" />  
	                <h:outputLabel styleClass="estilo_label" value="Descripcion de la ocupacion actual:" /> 
	                <p:editor id="ocupacion" value="#{solicitudesManagedBean.ocupacion}" height="150"/>    			
	             </div>
	             <p:commandButton onclick="PF('modal_solicitud').hide();" value="Cancelar"/>	              
	             <p:commandButton value="Aplicar" action="#{solicitudesManagedBean.guardarBySolicitante}" />
	        </p:dialog>
        </h:form>   
        <footer>
            <p>2013 &#174;Derechos reservados por INATEC --  Sistema de gestion de Certificaciones Laborales del INATEC</p>
        </footer>
        </div>
    </h:body>
</html>