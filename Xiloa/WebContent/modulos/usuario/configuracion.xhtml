<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
       <link type="text/css" rel="stylesheet" href="../../resources/css/configuracion.css"></link>
       <script type="text/javascript" src="../../resources/scripts/configuracion.js"></script>
    </h:head>
    <h:body>
    <div id="contenedor">      
      	<div id="header">
            <ui:insert name="header" >
                <ui:include src="../../modulos/compartido/paginamaestra.xhtml" />
	    	</ui:insert>
		</div>     	
		
		<h2>Configuraciones:</h2>
		<div id="contenedor_panel_configuracion" class="contenedor_paneles">
			<h:form>	
				<p:panelGrid columns="2" >  
				    <f:facet name="header">  
				        Configuracion de variables del sistema:
				    </f:facet>  
				   
					<h:outputLabel value="Listas" />  
					<p>Listas que se presentan a lo largo del sistema y que podrian cambiar sus valores en algun momento.</p>
										    
					<h:outputLabel value="Estados de la planificacion" />  
					<p>Estados posibles del proceso de planificacion</p>
					    
					<h:outputLabel value="Tipos de documentos" />  
					<p>Tipos de documentos en el portafolio</p>
					    
					<h:outputLabel value="Estados de la verificacion" />  
					<p>Estados de la verificacion</p>	    
				</p:panelGrid> 
			</h:form>  
		</div>
		<div id="contenedor_panel_mantenedores" class="contenedor_paneles">
			<p:tabView id="tabView1">  
	            <p:tab id="tab1" title="Mantenedores">
	            	   <h:form id="form_mantenedores">
					   <p:commandButton value="Agregar Mantenedor" style="margin-bottom: 5px" update=":mantenedorDialogo" action="#{configuracionManagedBean.nuevoMantenedor}" onclick="PF('dlg1').show();"/>  
	                   <p:dataTable id="mantenedoresDataTable" emptyMessage="No hay datos para mostrar"  var="mantenedor" value="#{configuracionManagedBean.mantenedores}" selection="#{configuracionManagedBean.selectedMantenedor}" rowKey="#{mantenedor.id}" selectionMode="single">  
	                      <p:column headerText="Tipo"><h:outputText value="#{mantenedor.tipo}" /></p:column>
						  <p:column headerText="Nombre"><h:outputText value="#{mantenedor.etiqueta}" /></p:column>
	                      <p:column headerText="Valor"><h:outputText value="#{mantenedor.valor}" /></p:column>
	                      <p:column headerText="Anterior"><h:outputText value="#{mantenedor.anterior}" /></p:column>
	                      <p:column headerText="Próximo"><h:outputText value="#{mantenedor.proximo}" /></p:column>
						  <p:column headerText="Editar" style="width:4%">
							<p:commandButton id="selectButton" action="#{configuracionManagedBean.editarMantenedor(configuracionManagedBean.selectedMantenedor)}" update=":mantenedorDialogo" icon="ui-icon-pencil" title="Editar" onclick="PF('dlg1').show();"/>  
						  </p:column>
	                   </p:dataTable>
	                   </h:form>
	            </p:tab>
	
	            <p:tab id="tab2" title="Usuarios">  
	                   <p:dataTable emptyMessage="No hay datos para mostrar"  var="usuario" value="#{utilitariosManagedBean.usuarios}">  
	                      <p:column headerText="Login"><h:outputText value="#{usuario.usuarioAlias}" /></p:column>  
	                      <p:column headerText="Nombre completo"><h:outputText value="#{usuario.contacto.nombreCompleto}" /></p:column>  
	                      <p:column headerText="Rol"><h:outputText value="#{usuario.rol.nombre}" /></p:column>                 
	                      <p:column headerText="Ultimo acceso"><h:outputText value="#{usuario.fechaUltimoAcceso}" ><f:convertDateTime type="date" pattern="dd/MM/yyyy HH:mm:ss"/></h:outputText></p:column>
	                      <p:column headerText="Activo"><h:outputText value="#{usuario.usuarioEstatus}" /></p:column>
	                   </p:dataTable>         
	            </p:tab>  
	
	            <p:tab id="tab3" title="Roles">  
	                    <p:dataTable emptyMessage="No hay datos para mostrar"  var="rol" value="#{utilitariosManagedBean.roles}">  
	                      <p:column headerText="Nombre"><h:outputText value="#{rol.nombre}" /></p:column>  
	                      <p:column headerText="Descripcion"><h:outputText value="#{rol.descripcion}" /></p:column>                   
	                   </p:dataTable>    
	            </p:tab> 
	       </p:tabView>  
       </div>
    </div>
    
	<p:dialog id="modalDialog1" styleClass="estilo_dialogoactividades" header="Edición de Mantenedor:" widgetVar="dlg1" modal="true" resizable="false" width="350" height="300">
		<div id="contenedor_dialogoactividades">
		<h:panelGrid id="modal1" columns="2" cellpadding="4">
		<h:form id="mantenedorDialogo">
		  	<h:outputLabel styleClass="estilo_label" value="Tipo:" />
            <p:inputText id="codigo1" value="#{configuracionManagedBean.mantenedor.tipo}" required="true" requiredMessage="El tipo es requerido"/>
            <br/>	
            <h:outputLabel styleClass="estilo_label" value="Etiqueta:" />
            <p:inputText id="codigo2" value="#{configuracionManagedBean.mantenedor.etiqueta}" required="true" requiredMessage="La etiqueta es requerida"/>
            <br/>	
            <h:outputLabel styleClass="estilo_label" value="Valor:" />
            <p:inputText id="codigo3" value="#{configuracionManagedBean.mantenedor.valor}" required="true" requiredMessage="El valor es requerido"/>
            <br/>
            <h:outputLabel styleClass="estilo_label" value="Valor Anterior:" />
            <p:inputText id="codigo4" value="#{configuracionManagedBean.mantenedor.anterior}" required="false" />
			<br/>
            <h:outputLabel styleClass="estilo_label" value="Valor Próximo:" />
            <p:inputText id="codigo5" value="#{configuracionManagedBean.mantenedor.proximo}" required="false" />
			<br/>	
			<div class="contenedor_botones" style="margin-top:32px;">			
	            <h:commandButton value="Cancelar" onclick="PF('dlg1').hide();"/> 
				<h:commandButton value="Aceptar" update=":tab1:mantenedoresDataTable" action="#{configuracionManagedBean.guardarMantenedor(configuracionManagedBean.mantenedor)}" onclick="PF('dlg1').hide();"/>
			</div>
		</h:form>
		</h:panelGrid>
		</div>
	</p:dialog>	
         
</h:body>
</html>