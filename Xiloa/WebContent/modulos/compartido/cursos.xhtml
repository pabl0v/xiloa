<?xml version='1.0' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
	  xmlns:sec="http://www.springframework.org/security/tags">
    <h:head>
		<link type="text/css" rel="stylesheet" href="../../resources/css/cursos.css"></link>
 		<!-- Requeridos por OpenID -->
		<link type="text/css" rel="stylesheet" href="../../resources/openidselector/css/openid.css" />
		<script type="text/javascript" src="../../resources/openidselector/js/openid-jquery.js"></script>
	    <script type="text/javascript" src="../../resources/openidselector/js/openid-en.js"></script>
		<!-- ********************* -->
	    <script type="text/javascript" src="../../resources/scripts/usuario.js"></script>
    </h:head>
    <h:body>
    	<h:form id="cursos">
    	<div id="contenedor">
			<div id="header">
				<ui:insert name="header" >
					<ui:include src="../../modulos/compartido/paginamaestra.xhtml" />
				</ui:insert>
				<script type="text/javascript" src="../../resources/scripts/cursos.js"></script>
			</div>
			<div id="cabezera">
				<h2>Cursos de Certificación disponibles</h2>
			</div>
			
	        <div id="contenedor_tabla_competencias"> 
				<p:dataTable id="grid" emptyMessage="Información no disponible" var="certificacion" styleClass="tablaCompetencias" value="#{inicioManagedBean.certificaciones}" paginator="true" rows="10" 
					paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"  
					rowKey="#{certificacion.id}" selection="#{inicioManagedBean.selectedCertificacion}" selectionMode="single">
					<!-- Este ajax permite mostrar el modal al hacer click en las filas de la tabla -->            
					<p:ajax event="rowSelect" update=":cursos:panelDialogo" oncomplete="PF('modal_comp').show()" />
					<p:column style="display: none" headerText="Unidad de competencia"><h:outputText value="#{certificacion.id}" /></p:column>
					<p:column exportable="true" filterBy="#{certificacion.nombre}" filterMatchMode="contains">
						<f:facet name="header">
							<h:outputText value="Certificación" />  
						</f:facet> 
						<h:outputText value="#{certificacion.nombre}" />
					</p:column>
					<p:column exportable="true" filterBy="#{certificacion.ifpNombre}" filterMatchMode="contains">
						<f:facet name="header">  
							<h:outputText value="Centro de Formación" />  
						</f:facet> 
						<h:outputText value="#{certificacion.ifpNombre}" />
					</p:column>  
					<p:column headerText="Prematriculas">
						<h:outputText value="del "></h:outputText>
						<h:outputText value="#{certificacion.inicia}"><f:convertDateTime type="date" pattern="dd/MM/yyyy"/></h:outputText>
						<h:outputText value=" al "></h:outputText>
						<h:outputText value="#{certificacion.finaliza}"><f:convertDateTime type="date" pattern="dd/MM/yyyy"/></h:outputText>
					</p:column>  
					<p:column headerText="Cupo máximo"><h:outputText value="#{certificacion.disponibilidad} Personas" /></p:column>
				</p:dataTable> 
			</div>
		</div>
	                  	      
	        <p:dialog id="modal_info_competencias" styleClass="modal_info_competencias" header="Detalle:" widgetVar="modal_comp" width="550" height="500">  
		        <p:outputPanel id="panelDialogo">
		        	<div class="seccion_detalle">
		      			<p>Nombre de la certificacion</p>
		      			<h:outputText value="#{inicioManagedBean.selectedCertificacion.nombre}"></h:outputText>  		
		          	</div>
		          	<div class="seccion_detalle">
		      			<p>Ultimo dia para solicitar evaluación:</p>
		      			<h:outputText value="#{inicioManagedBean.selectedCertificacion.finaliza}"><f:convertDateTime type="date" pattern="dd/MM/yyyy"/></h:outputText>  		
		          	</div>
		          	<div class="seccion_detalle">
		      			<p>Direccion del Centro evaluador:</p>
		      			<h:outputText value="#{inicioManagedBean.selectedCertificacion.ifpDireccion}"></h:outputText>  		
		          	</div>
		          	<div class="seccion_detalle">
		      			<p>Requisitos para aplicar a la evaluacion:</p>
						<p:dataList emptyMessage="Lista no disponible" value="#{inicioManagedBean.selectedCertificacion.requisitos}" var="requisito" type="ordered">  
							<ul><li>#{requisito.descripcion}</li></ul>
						</p:dataList>
		          	</div>
		          	<div class="seccion_detalle">
		      			<p>Arancel:</p>
		      			C$ <h:outputText value="#{inicioManagedBean.selectedCertificacion.costoFormateado}"></h:outputText>  		
		          	</div>
		          	<div>
			          	<p:commandButton onclick="PF('modal_comp').hide()" value="Cancelar"/>
			          	<p:commandButton id="registrarSolicitud" action="#{inicioManagedBean.indicaAplicar}" value="Aplicar" oncomplete="PF('modal_comp').hide()" />
		            </div>
		            </p:outputPanel>
	    	</p:dialog>
	    </h:form>
	</h:body>
</html>